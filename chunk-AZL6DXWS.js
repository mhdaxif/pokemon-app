import{a as g}from"./chunk-3V2RRN27.js";import{D as h,U as b,_ as n,ea as m,m as v,s as l,x as f}from"./chunk-GB7CMFKM.js";var p=class o{FAVORITE_KEY="favorite_pokemon";getFavorites(){let t=localStorage.getItem(this.FAVORITE_KEY);return t?JSON.parse(t):[]}addFavorite(t){let e=this.getFavorites();e.includes(t)||(e.push(t),localStorage.setItem(this.FAVORITE_KEY,JSON.stringify(e)))}removeFavorite(t){let e=this.getFavorites();e=e.filter(i=>i!==t),localStorage.setItem(this.FAVORITE_KEY,JSON.stringify(e))}isFavorite(t){return this.getFavorites().includes(t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})};var y=20,k=class o{httpClient=m(g);favoriteService=m(p);getPokemons(t=0,e=y){t||(t=0),e||(e=y);let i=`https://pokeapi.co/api/v2/pokemon?limit=${e}&offset=${t}`;return this.httpClient.get(i).pipe(l(r=>r.results),b(r=>f(r.map(a=>this.fetchPokemonData(a.url)))))}covertToPokemon(t){let{id:e,name:i,height:r,weight:a,sprites:s,abilities:c,stats:u}=t,{abilities:d,stats:F}=this.shapeData(c,u);return{id:e,name:i,height:r,weight:a,abilities:d,stats:F,frontShiny:s.front_shiny,isFavorite:this.isFavorite(i)}}fetchPokemonData(t){return this.httpClient.get(t).pipe(l(e=>this.covertToPokemon(e)),h(e=>(console.error(e),v)))}shapeData(t,e){let i=t.map(({ability:a,is_hidden:s})=>({name:a.name,isHidden:s})),r=e.map(({stat:a,effort:s,base_stat:c})=>({name:a.name,effort:s,baseStat:c}));return{abilities:i,stats:r}}isFavorite(t){return this.favoriteService.isFavorite(t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=n({token:o,factory:o.\u0275fac,providedIn:"root"})};export{p as a,k as b};
