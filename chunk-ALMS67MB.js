import{a as K,b as Q}from"./chunk-AZL6DXWS.js";import{a as W,b as q,c as G,d as J,e as f,f as R,g as U,h as X,i as u,k as Y,l as h,m as Z}from"./chunk-LRIJ5G46.js";import"./chunk-3V2RRN27.js";import"./chunk-IX6G3U3V.js";import{$b as A,Ab as a,Ac as N,Bb as i,Cc as B,Db as $,Fb as p,Gb as M,Rb as d,Vb as z,Wa as P,Wb as H,Xb as j,Zb as g,_ as y,a as S,ac as V,ea as c,ia as l,k,lb as w,o as v,ob as T,pb as E,qa as x,qb as F,ra as O,s as b,sb as s,ya as D,yb as I,zb as L}from"./chunk-GB7CMFKM.js";var C=class n{totalCount=0;pageChange=new D;pageSizeOptions=[10,20,50,100];pageSize=20;pageIndex=0;constructor(){}ngOnInit(){}onPageChanged(e){this.pageChange.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["app-pagination"]],inputs:{totalCount:"totalCount"},outputs:{pageChange:"pageChange"},standalone:!0,features:[g],decls:1,vars:4,consts:[[3,"page","length","pageSize","pageSizeOptions","pageIndex"]],template:function(t,o){t&1&&(a(0,"mat-paginator",0),p("page",function(r){return o.onPageChanged(r)}),i()),t&2&&s("length",o.totalCount)("pageSize",o.pageSize)("pageSizeOptions",o.pageSizeOptions)("pageIndex",o.pageIndex)},dependencies:[f,u,Y,h],styles:[".mat-paginator[_ngcontent-%COMP%]{background-color:transparent;color:#333}"]})};var _=class n{initialState={};stateSubject=new k(this.initialState);state$=this.stateSubject.asObservable();getState(){return this.stateSubject.getValue()}setState(e){let t=this.getState();this.stateSubject.next(S(S({},t),e)),console.log("satc",e)}setSelectedPokemon(e){this.setState({selectedPokemon:e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var re=(n,e)=>e.id,pe=()=>[import("./chunk-232AQMRZ.js").then(n=>n.PokemonCardComponent),N];function me(n,e){if(n&1){let t=$();a(0,"app-pokemon-card",10),p("onFavorite",function(m){x(t);let r=M(2);return O(r.handleToggleFavorite(m))}),i()}if(n&2){let t=e.$implicit;s("pokemon",t)}}function se(n,e){if(n&1&&(I(0,me,1,1,"app-pokemon-card",9,re),A(2,"async")),n&2){let t=M();L(V(2,0,t.filteredPokemon$))}}function ce(n,e){n&1&&(a(0,"p"),d(1,"Loading Pokemons"),i())}function le(n,e){n&1&&(a(0,"p"),d(1,"Failed to load dependencies"),i())}var te=class n{favoriteService=c(K);appStateService=c(_);pokemonList$;filteredPokemon$;constructor(){this.loadPageData(),console.log(this.appStateService.getState().pokemonSearch),this.appStateService.getState().pokemonSearch&&(this.searchTerm=this.appStateService.getState().pokemonSearch??"",this.onfilteredPokemon(this.searchTerm))}pokemonService=c(Q);searchTerm="";onfilteredPokemon(e){this.filteredPokemon$=this.pokemonList$.pipe(b(t=>t.filter(o=>o.name.includes(e.toLowerCase()))))}handleToggleFavorite(e){this.favoriteService.isFavorite(e)?this.favoriteService.removeFavorite(e):this.favoriteService.addFavorite(e)}onPageEvent(e){console.log({event:e});let t=e.pageIndex*e.pageSize,o=e.pageSize;this.loadPageData(t,o)}loadPageData(e,t){this.pokemonList$&&(this.pokemonList$=v([])),this.filteredPokemon$&&(this.filteredPokemon$=v([])),this.pokemonList$=this.pokemonService.getPokemons(e,t),this.filteredPokemon$=this.pokemonList$}saveState(){let e={pokemonSearch:this.searchTerm};this.appStateService.setState(e)}canDeactivate(){return!0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=l({type:n,selectors:[["app-home"]],standalone:!0,features:[g],decls:15,vars:2,consts:[[500,null],[1,"full-page-card"],[1,"scrollable-content"],[1,"header"],["appearance","outline",1,"search-bar"],["matInput","",3,"ngModelChange","ngModel"],[1,"card-layout"],[1,"sticky-pagination"],[3,"pageChange","totalCount"],[3,"pokemon"],[3,"onFavorite","pokemon"]],template:function(t,o){t&1&&(a(0,"mat-card",1)(1,"div",2)(2,"div",3)(3,"mat-form-field",4)(4,"mat-label"),d(5,"Search by name "),i(),a(6,"input",5),j("ngModelChange",function(r){return H(o.searchTerm,r)||(o.searchTerm=r),r}),p("ngModelChange",function(){return o.onfilteredPokemon(o.searchTerm)}),i()()(),a(7,"div",6),w(8,se,3,2)(9,ce,2,0)(10,le,2,0),E(11,8,pe,9,null,10,0,null,T),F(),i()(),a(13,"div",7)(14,"app-pagination",8),p("pageChange",function(r){return o.onPageEvent(r)}),i()()()),t&2&&(P(6),z("ngModel",o.searchTerm),P(8),s("totalCount",1300))},dependencies:[f,u,X,U,R,Z,h,J,W,q,G,B,C],styles:["h2[_ngcontent-%COMP%]{text-decoration:underline;font-style:italic;margin-bottom:2rem}div.container[_ngcontent-%COMP%]{padding:.75rem;margin-bottom:2rem}.card-layout[_ngcontent-%COMP%]{margin:auto 10%;display:flex;flex-wrap:wrap}.card-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--num-cards: 7;flex-basis:calc((100% - 1.5rem) / var(--num-cards));flex-shrink:1;flex-grow:1}@media (max-width: 1400px){.card-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--num-cards: 5}}@media (max-width: 1200px){.card-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--num-cards: 4}}@media (max-width: 900px){.card-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--num-cards: 3}}@media (max-width: 700px){.card-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--num-cards: 2}}@media (max-width: 500px){.card-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{--num-cards: 1}}.header[_ngcontent-%COMP%]{text-align:center}.search-bar[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:0 auto}.full-page-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;padding:0;margin:0}.sticky-search[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background-color:#fff;padding:10px;border-bottom:1px solid #ccc}.scrollable-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:10px}.pokemon-card[_ngcontent-%COMP%]{display:flex;justify-content:center}.sticky-pagination[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:10;background-color:#fff;padding:10px;border-top:1px solid #ccc}"],changeDetection:0})};export{te as HomeComponent};
